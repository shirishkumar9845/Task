<div id="map" style="width: 100%; height: 360px"></div>


<script src="//maps.googleapis.com/maps/api/js?key=AIzaSyA6ZWBy7HgewGRuFEtKzTLcrwF9Y_RfJiY&callback=initMap" async="" defer="defer" type="text/javascript"></script>

<script type="text/javascript">
<!--
  function initMap() {
    var defaultZoom = 17;

    var lat = <%= @location.lat %>;
    var lng = <%= @location.lng %>;

    // create map and add controls
    var mapOptions = {
      center: new google.maps.LatLng(lat, lng),
      zoom: defaultZoom,
      mapTypeId: google.maps.MapTypeId.ROADMAP,
      scrollwheel: false,
      scaleControl: false
    };
    var map = new google.maps.Map(document.getElementById('map'),mapOptions);

    var mylat = document.getElementById("location_lat").value;
    var mylng = document.getElementById("location_lng").value;
    if (jQuery.isEmptyObject(mylat)) {
      var mylat = lat;
      var mylng = lng;
    };

    var centrePoint = new google.maps.LatLng(mylat, mylng);

    map.setCenter(centrePoint);
    map.setZoom(defaultZoom);

    // add a draggable marker
    marker = new google.maps.Marker({
      map:map,
      draggable: false,
      animation: google.maps.Animation.DROP,
      position: centrePoint
    });

    // Set marker image
    var defaultImage = new google.maps.MarkerImage(
        "http://maps.gstatic.com/mapfiles/place_api/icons/geocode-71.png",
        new google.maps.Size(71, 71),
        new google.maps.Point(0, 0),
        new google.maps.Point(17, 34),
        new google.maps.Size(35, 35)
    );
    marker.setIcon(defaultImage);
}
//-->
</script>

<br />